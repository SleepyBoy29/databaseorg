COLUMN TABLESPACE_NAME FORMAT A30
COLUMN FILE_NAME FORMAT A50
COLUMN FREE_MB FORMAT 99999999
COLUMN USED_MB FORMAT 99999999
COLUMN TOTAL_MB FORMAT 99999999

SELECT B.TABLESPACE_NAME,B.FILE_NAME,A.FREE_MB,B.BYTES/1024/1024-A.FREE_MB "USED_MB", B.BYTES/1024/1024 "TOTAL_MB"
FROM DBA_DATA_FILES B,
(SELECT FILE_ID,SUM(BYTES)/1024/1024 FREE_MB FROM DBA_FREE_SPACE GROUP BY FILE_ID) A
WHERE A.FILE_ID=B.FILE_ID
order by b.tablespace_name,a.free_mb desc;